package wtf.demise.features.modules.impl.exploit;

import net.minecraft.client.gui.GuiChat;
import net.minecraft.network.play.server.S2EPacketCloseWindow;
import wtf.demise.events.annotations.EventTarget;
import wtf.demise.events.impl.packet.PacketEvent;
import wtf.demise.features.modules.Module;
import wtf.demise.features.modules.ModuleCategory;
import wtf.demise.features.modules.ModuleInfo;
import wtf.demise.features.values.impl.BoolValue;

@ModuleInfo(name = "NoGuiClose", description = "Its in the name.", category = ModuleCategory.Exploit)
public class NoGuiClose extends Module {
    private final BoolValue chatOnly = new BoolValue("Chat Only", true, this);

    @EventTarget
    public void onPacketReceive(PacketEvent e) {
        if (e.getState() == PacketEvent.State.INCOMING) {
            if (e.getPacket() instanceof S2EPacketCloseWindow && (mc.currentScreen instanceof GuiChat || !chatOnly.get())) {
                e.setCancelled(true);
            }
        }
    }
}