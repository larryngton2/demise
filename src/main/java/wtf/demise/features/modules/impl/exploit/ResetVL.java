package wtf.demise.features.modules.impl.exploit;

import wtf.demise.events.annotations.EventTarget;
import wtf.demise.events.impl.player.MotionEvent;
import wtf.demise.features.modules.Module;
import wtf.demise.features.modules.ModuleCategory;
import wtf.demise.features.modules.ModuleInfo;
import wtf.demise.features.values.impl.SliderValue;

@ModuleInfo(name = "ResetVL", category = ModuleCategory.Exploit)
public class ResetVL extends Module {
    private final SliderValue timer = new SliderValue("Timer", 1, 1, 2.25f, 0.05f, this);
    private int ticks;
    private int jump;

    @Override
    public void onDisable() {
        mc.timer.timerSpeed = 1;
        jump = 0;
        ticks = 0;
    }

    @Override
    public void onEnable() {
        mc.timer.timerSpeed = 1;
        jump = 0;
        ticks = 0;
    }

    @EventTarget
    public void onPreMotion(MotionEvent e) {
        if (e.isPre()) {
            mc.thePlayer.cameraYaw = 0;
            mc.thePlayer.cameraPitch = 0;
            if (mc.thePlayer.onGround) {
                if (jump <= 25) {
                    mc.thePlayer.motionY = 0.11 + Math.random() / 1000f;
                    mc.timer.timerSpeed = timer.get();
                    jump++;
                } else {
                    mc.timer.timerSpeed = 1;
                    this.toggle();
                }
            }
        }
    }
}